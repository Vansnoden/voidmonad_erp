<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="submission_review_template" name="Submission PDF Email">
        <t t-call="web.html_container">
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous"/>
            <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css"/>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
            <t t-set="base_url" t-value="env['ir.config_parameter'].sudo().get_param('web.base.url')"/>
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <style>
                        :root {
                            --primary: rgb(223, 76, 46);
                            --primary-light: rgb(253, 70, 38);
                            --primary-dark: rgb(181, 61, 39);
                            --secondary: rgb(8, 3, 4);
                            --secondary-dark: rgb(8, 3, 4);
                            --secondary-light: rgb(184, 184, 184);
                            --accent: rgb(255,255,255);
                            --default: rgb(211, 211, 212);
                        }

                        .text-primary{
                            color: rgb(223, 76, 46)!important;
                        }

                        .mtable{
                            min-width: 100%!important;
                        }

                        .mtable tr{
                            border: 1px solid rgb(8, 3, 4)!important;
                        }

                        .mtable td{
                            border: 1px solid rgb(8, 3, 4)!important;
                        }

                        .mtable th{
                            border: 1px solid rgb(8, 3, 4)!important;
                            background-color: lightgrey!important;
                        }

                        .nav-item, .btn, .form-control, .nav-link, .nav-tabs{
                            border-radius: 0px!important;
                        }

                        .nav-link{
                            text-decoration: none!important;
                            font-weight: bolder;
                            color: rgb(223, 76, 46);
                        }

                        .nav-link:hover{
                            color: rgb(223, 76, 46);  
                        }

                        .pdf-ctn{
                            .header{
                                background: rgb(223, 76, 46)!important;
                                font-weight: 900;
                                font-size: 1.1rem;
                                color: #fff;
                            }
                        }
                    </style>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="container p-0">
                                <div class="" style="margin-top:-200px!important">
                                    <div class="row p-0">
                                        <div class="col-md-4 col-sm-12">
                                            <h1 class="text-primary">
                                                <strong>Submission Summary: <t t-esc="o.code"/>
                                                </strong>
                                            </h1>
                                        </div>
                                    </div>
                                </div>
                                <div class="p-0">
                                    <div class="row m-auto">
                                        <div class="">
                                            <table class="table mtable">
                                                <tr>
                                                    <th>
                                                        <label>Journal</label>
                                                    </th>
                                                    <td>
                                                        <t t-esc="o.journal_id.name"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        <label>Journal Section</label>
                                                    </th>
                                                    <td>
                                                        <t t-esc="o.section_id.name"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>
                                                        <label>Article type</label>
                                                    </th>
                                                    <td>
                                                        <t t-esc="o.type_id.name"/>
                                                    </td>
                                                </tr>
                                            </table>

                                            <h5 class="text-primary">
                                                <strong>Manuscript data</strong>
                                            </h5>

                                            <div class="">
                                                <table class="table  mtable">
                                                    <tr>
                                                        <th>
                                                            <label>Title</label>
                                                        </th>
                                                        <td>
                                                            <span t-out="o.name"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            <label>Abstract</label>
                                                        </th>
                                                        <td>
                                                            <span t-out="o.abstract"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            <label>Keywords</label>
                                                        </th>
                                                        <td>
                                                            <t t-foreach="o.keyword_ids" t-as="keyword">
                                                                <t t-esc="keyword.name"/>
                                                                <span>,</span>
                                                            </t>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>
                                                            <label>Highlights</label>
                                                        </th>
                                                        <td>
                                                            <span t-out="o.highlights"/>
                                                        </td>
                                                    </tr>
                                                </table>

                                                <h5 class="text-primary">
                                                    <strong>Authors</strong>
                                                </h5>

                                                <div class="">
                                                    <table class="table mtable">
                                                        <thead>
                                                            <tr>
                                                                <th>Email</th>
                                                                <th>Title</th>
                                                                <th>First name</th>
                                                                <th>Middle name</th>
                                                                <th>Last name</th>
                                                                <th>Affiliations</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <t t-foreach="o.author_ids" t-as="author">
                                                                <tr>
                                                                    <td>
                                                                        <t t-esc="author.email"/>
                                                                    </td>
                                                                    <td>
                                                                        <span t-field="author.title"/>
                                                                    </td>
                                                                    <td>
                                                                        <t t-esc="author.fname"/>
                                                                    </td>
                                                                    <td>
                                                                        <t t-esc="author.mname"/>
                                                                    </td>
                                                                    <td>
                                                                        <t t-esc="author.lname"/>
                                                                    </td>
                                                                    <td>
                                                                        <span t-raw="author.get_affiliation_summary(o.id)"/>
                                                                    </td>
                                                                </tr>
                                                            </t>
                                                            <tr>
                                                                <th>
                                                                    <label>Corresponding author</label>
                                                                </th>
                                                                <td colspan="4">
                                                                    <span t-esc="o.corresponding_author.name"/>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>

                                            <h5 class="text-primary">
                                                <strong>Proposed reviewers</strong>
                                            </h5>

                                            <div class="">
                                                <table class="table  mtable">
                                                    <tr>
                                                        <th>Title</th>
                                                        <th>Name</th>
                                                        <th>Email</th>
                                                    </tr>
                                                    <t t-if="o">
                                                        <t t-foreach="o.suggested_reviewer_ids" t-as="reviewer">
                                                            <tr>
                                                                <td>
                                                                    <span t-field="reviewer.title" />
                                                                </td>
                                                                <td>
                                                                    <t t-esc="reviewer.name" />
                                                                </td>
                                                                <td>
                                                                    <t t-esc="reviewer.email" />
                                                                </td>
                                                            </tr>
                                                        </t>
                                                    </t>
                                                </table>
                                            </div>



                                            <h5 class="text-primary">
                                                <strong>Documents</strong>
                                            </h5>

                                            <div class="">
                                                <table class="table  mtable" id="file_table">
                                                    <tr>
                                                        <th>
                                                            <label>Main File</label>
                                                        </th>
                                                        <td colspan="4">
                                                            <t t-if="o.file_id">
                                                                <a t-attf-href="{{base_url}}/web/content/{{o.file_id.id}}?download=true" t-attf-id="fd_{{o.file_id.id}}">
                                                                    <span t-field="o.file_id"/>
                                                                </a>
                                                            </t>
                                                            <t t-else="">
                                                                <strong>
                                                                     ???
                                                                </strong>
                                                            </t>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>Document Type</th>
                                                        <th>Name</th>
                                                        <th>Size</th>
                                                        <th>File type</th>
                                                        <th>Download file</th>
                                                    </tr>
                                                    <t t-foreach="o.document_ids" t-as="doc">
                                                        <tr>
                                                            <td>
                                                                <t t-esc="doc.sudo().name.split('_')[0]" />
                                                            </td>
                                                            <td>
                                                                <t t-esc="' '.join(doc.sudo().name.split('_')[1:])" />
                                                            </td>
                                                            <td>
                                                                <t t-esc="doc.file_size"/>
                                                                <span> Kb </span>
                                                            </td>
                                                            <td>
                                                                <t t-esc="doc.mimetype" />
                                                            </td>
                                                            <td>
                                                                <a t-attf-href="{{base_url}}/web/content/{{doc.sudo().id}}?download=true" t-attf-id="fd_{{doc.sudo().id}}" class="btn btn-secondary">
                                                                    <span>Click to download</span>
                                                                </a>
                                                            </td>
                                                        </tr>
                                                    </t>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

</odoo>
