<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="article_pdf_reader" name="PDF Reader">
        <t t-call="web.layout">
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous"/>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
            <link rel="stylesheet" type="text/css" href="/ojm/static/src/scss/pdf_reader.css"/>

            <div class="reader-wrapper">

                <!-- <div class="col-md-3 col-sm-12 m-0 p-0 toggleSide header p-1 border-bottom d-flex flex-row align-items-center justify-content-start">
                    <span>ePDF-Reader</span>
                </div> -->

                <!-- <div class="col-md-3 col-sm-12 m-0 p-0 d-none" id="custom_menu">
                    <div>
                        <nav>
                            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                <button class="nav-link active" id="nav-details-tab" data-bs-toggle="tab" data-bs-target="#nav-details" type="button" role="tab" aria-controls="nav-details" aria-selected="true">
                                    Details
                                </button>
                                <button class="nav-link" id="nav-relations-tab" data-bs-toggle="tab" data-bs-target="#nav-relations" type="button" role="tab" aria-controls="nav-relations" aria-selected="false">
                                    Relations
                                </button>
                            </div>
                        </nav>
                        <div class="tab-content" id="nav-tabContent">
                            <div class="tab-pane fade show active p-2" id="nav-details" role="tabpanel" aria-labelledby="nav-details-tab">
                                
                                <div class="row">
                                    <div class="col-5">
                                        <img t-attf-src="data:;base64,{{article.volume_id.cover}}" class="img-fluid"/>
                                    </div>
                                    <div class="col-7">
                                        <a t-attf-href="/journal/{{slug(article.journal_id)}}/issue/{{article.volume_id.id}}" class="nav-link">
                                            <t t-esc="article.volume_id.name"/>
                                        </a>
                                        <div class="short-des" t-raw="article.volume_id.description"/>
                                    </div>
                                </div>
                                
                                <div class="py-2">
                                    <span class="text-muted">ARTICLE</span>
                                    <div>
                                        <span t-raw="article.name"/>
                                        <br/>
                                        <a t-attf-href="/journal/{{slug(journal)}}/article/{{slug(article)}}" class="nav-link">
                                            View article page
                                        </a>
                                        <br/>
                                        <span>BY:</span>
                                        <t t-foreach="article.author_ids" t-as="author">
                                            <span class="btn btn-default mrounded" t-esc="author.name"/>
                                        </t>
                                    </div>
                                </div>
                                
                                <div class="d-flex flex-row justify-content-between align-items-center border-bottom">
                                    <button class="btn btn-secondary">
                                        <i class="fa fa-quote-left mr-2"/>
                                        <span>Cite</span>
                                    </button>
                                    <button class="btn">
                                        <a href="#">
                                            <img alt="icon" src="/ojm/static/src/img/CROSSMARK_Color_horizontal.svg" class="img-fluid" style="height:3em;width:auto"/>
                                        </a>
                                    </button>
                                </div>
                                <div class="">
                                    <table class="table mtable">
                                        <tr>
                                            <td>
                                                DOI
                                            </td>
                                            <td>
                                                <a t-attf-href="article.doi" target="_blank">
                                                    <t t-esc="article.doi"/>
                                                </a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                ISSN
                                            </td>
                                            <td>
                                                <a t-attf-href="article.issn">
                                                    <t t-esc="article.issn"/>
                                                </a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                Accepted
                                            </td>
                                            <td>
                                                <span t-esc="article.reviewed_start_date.date()"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                Received
                                            </td>
                                            <td>
                                                <span t-esc="article.submission_date.date()"/>
                                            </td>
                                        </tr>

                                    </table>
                                </div>
                
                            </div>
                            <div class="tab-pane fade p-2" id="nav-relations" role="tabpanel" aria-labelledby="nav-relations-tab">
                                <span class="text-muted">
                                    no data found
                                </span>
                            </div>
                        </div>
                    </div>
                </div> -->

                <div class="row m-auto" id="pdf-ctn">
                    <div class="col-md-3 col-sm-12 m-0 p-0" id="custom_menu">
                        <div>
                            <div class="header headerSlider p-1 border-bottom d-flex flex-row align-items-center justify-content-start">
                                <span>ePDF-Reader</span>
                            </div>
                            <nav>
                                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                    <button class="nav-link active" id="nav-details-tab" data-bs-toggle="tab" data-bs-target="#nav-details" type="button" role="tab" aria-controls="nav-details" aria-selected="true">
                                    Details
                                    </button>
                                    <button class="nav-link" id="nav-relations-tab" data-bs-toggle="tab" data-bs-target="#nav-relations" type="button" role="tab" aria-controls="nav-relations" aria-selected="false">
                                    Relations
                                    </button>
                                </div>
                            </nav>
                            <div class="tab-content" id="nav-tabContent">
                                <div class="tab-pane fade show active p-2" id="nav-details" role="tabpanel" aria-labelledby="nav-details-tab">

                                    <div class="row">
                                        <div class="col-5">
                                            <img t-attf-src="data:;base64,{{article.volume_id.cover}}" class="img-fluid"/>
                                        </div>
                                        <div class="col-7">
                                            <a t-attf-href="/journal/{{slug(article.journal_id)}}/issue/{{article.volume_id.id}}" class="nav-link">
                                                <t t-esc="article.volume_id.name"/>
                                            </a>
                                            <div class="short-des" t-raw="article.volume_id.description"/>
                                        </div>
                                    </div>

                                    <div class="py-2">
                                        <span class="text-muted">ARTICLE</span>
                                        <div>
                                            <span t-raw="article.short_title"/>
                                            <br/>
                                            <a t-attf-href="/journal/{{slug(journal)}}/article/{{slug(article)}}" class="nav-link">
                                            View article page
                                            </a>
                                            <br/>
                                            <span>BY:</span>
                                            <t t-foreach="article.author_ids" t-as="author">
                                                <span class="bg-default mrounded" t-esc="author.name"/>
                                            </t>
                                        </div>
                                    </div>

                                    <div class="d-flex flex-row justify-content-between align-items-center border-bottom">
                                        <button class="btn btn-secondary">
                                            <i class="fa fa-quote-left mr-2"/>
                                            <span>Cite</span>
                                        </button>
                                        <button class="btn">
                                            <a href="#">
                                                <img alt="icon" src="/ojm/static/src/img/CROSSMARK_Color_horizontal.svg" class="img-fluid" style="height:3em;width:auto"/>
                                            </a>
                                        </button>
                                    </div>
                                    <div class="">
                                        <table class="table mtable">
                                            <tr>
                                                <td>
                                                DOI
                                                </td>
                                                <td>
                                                    <a t-attf-href="article.doi" target="_blank">
                                                        <t t-esc="article.doi"/>
                                                    </a>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                ISSN
                                                </td>
                                                <td>
                                                    <a t-attf-href="article.issn">
                                                        <t t-esc="article.issn"/>
                                                    </a>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                Accepted
                                                </td>
                                                <td>
                                                    <span t-esc="article.reviewed_start_date.date()"/>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                Received
                                                </td>
                                                <td>
                                                    <span t-esc="article.submission_date.date()"/>
                                                </td>
                                            </tr>

                                        </table>
                                    </div>

                                </div>
                                <div class="tab-pane fade p-2" id="nav-relations" role="tabpanel" aria-labelledby="nav-relations-tab">
                                    <span class="text-muted">
                                    no data found
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-9 col-sm-12 m-0 p-0" id="reader">
                        <iframe id="pdf-js-viewer" t-attf-src="/ojm/static/src/js/pdfjs-4.0.379-dist/web/viewer.html?file=/web/content/{{article.typesetted_document.id}}" title="webviewer" frameborder="0" style="width:100%; height:100vh">
                        </iframe>
                    </div>
                </div>

                <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
                <script type="text/javascript" src="/ojm/static/src/js/pdf_reader.js"></script>
            </div>
        </t>
    </template>

</odoo>
